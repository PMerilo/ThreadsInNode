<div class="admin-padding">
  <div class="col py-3"
    style="width: 60%; margin:0 auto; background:white;box-shadow: 12px 12px 22px grey; border-radius:30px; padding: 40px;">
    <h1 class="display-4">Edit Product {{product.name}}</h1><span id="datetime"></span>

    <form method="POST" action="/seller/editProduct/{{product.sku}}">
      <div class="form-group col py-3">
        <label for="name">Name</label>
        <input type="text" name="name" id="name" class="form-control" value="{{product.name}}">

      </div>
      <div class="form-group col py-3">
        <label for="category">Category</label>
        <select name="category" id="category">
          <option value="T-Shirts & Tops">T-Shirts & Tops</option>
          <option value="Jeans & Joggers">Jeans & Joggers</option>
          <option value="Shorts & Skirts">Shorts & Skirts</option>
          <option value="Dresses">Dresses</option>
          <option value="Hoodies">Hoodies</option>
        </select>

      </div>

      <div class="form-group col py-3" id="">
        <label for="price">Price</label>
        <input type="number" name="price" id="price" class="form-control" value="{{product.price}}" required>

      </div>
      <div class="form-group col py-3" id="">
        <label for="quantity">Quantity</label>
        <input type="number" name="quantity" id="quantity" class="form-control" value="{{product.quantity}}" required>

      </div>
      <div class="form-group col py-3">
        <label for="description">Description</label>
        <textarea name="description" id="description" cols="30" rows="10" class="form-control"
          required>{{product.description}}</textarea>


      </div>
      <div class="form-group col py-3">
        <input type="file" class="custom-file-input" id="posterUpload" name="posterUpload"
          accept="image/png,image/jpeg,image/jpg,image/gif">
      </div>
      <div class="text-danger small mb-2" id="posterErr" style="display:none">
        <img id="poster" src="/images/no-image.jpg" alt="Poster" class="border img-thumbnail img-fluid">
        <input id="posterURL" type="hidden" name="posterURL">
      </div>
      <input type="submit" value="Edit Product" class="blue-btn" />
    </form>
  </div>
</div>

<style type="text/css">
  .image-preview {
    width: 300px;
    min-height: 100px;
    border: 1px solid #000;
    margin-top: 15px;

    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: #6c757d;
  }

  .image-preview__image {
    display: none;
    width: 100%;
  }
</style>

<script>
  const fileInput = document.getElementById('file-input');
  const previewContainer = document.getElementById('imagePreview');
  const previewImage = previewContainer.querySelector('.image-preview__image');
  const previewDefaultText = previewContainer.querySelector('.image-preview__default-text');

  fileInput.addEventListener('change', function () {
    const file = this.files[0]

    if (file) {
      const reader = new FileReader();

      previewDefaultText.style.display = "none";
      previewImage.style.display = "block";

      reader.addEventListener('load', function () {
        console.log(this)
        previewImage.setAttribute('src', this.result);
      })

      reader.readAsDataURL(file);
    } else {
      previewDefaultText.style.display = null;
      previewImage.style.display = null;
      previewImage.setAttribute('src', '');
    }
  });
</script>